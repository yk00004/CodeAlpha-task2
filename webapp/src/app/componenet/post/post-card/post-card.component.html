<mat-card
  class="rounded-2xl overflow-hidden shadow transition-transform hover:shadow-lg hover:-translate-y-1 duration-200 bg-white"
>
  <!-- 🧑‍💼 User Header -->
  <div class="flex items-center gap-3 p-4 border-b">
    <img
      *ngIf="post.user?.profileImage"
      [src]="'http://localhost:5000/' + post.user.profileImage"
      alt="User"
      class="w-10 h-10 rounded-full object-cover ring-2 ring-gray-200"
    />
    <div>
      <p class="font-semibold text-gray-800">{{ post.user?.username }}</p>
      <p class="text-xs text-gray-500"> {{ post.createdAt | time }}</p>
    </div>
  </div>

  <!-- 🖼️ Post Image -->
  <img
    *ngIf="post.image"
    [src]="'http://localhost:5000/' + post.image"
    class="w-full h-64 object-cover transition-opacity hover:opacity-90"
  />

  <!-- ✏️ Caption + Actions -->
  <div class="p-4">
    <p class="mb-2 text-gray-800 text-sm">{{ post.caption }}</p>

    <!-- ❤️ Like / 💬 Comments -->
    <div class="flex items-center gap-6 text-sm text-gray-600 mb-3">
      <button
        (click)="toggleLike()"
        class="flex items-center gap-1 hover:text-red-500 transition"
      >
        <mat-icon
          class="text-base"
          [ngClass]="{ 'text-red-500': hasLiked() }"
        >
          {{ hasLiked() ? 'favorite' : 'favorite_border' }}
        </mat-icon>
        {{ post.likes.length }}
      </button>

      <span class="flex items-center gap-1">
        <mat-icon class="text-base">chat_bubble_outline</mat-icon>
        {{ post.comments.length }}
      </span>
    </div>

    <!-- 💬 Existing Comments -->
    <div
  class="space-y-2 text-sm text-gray-700 max-h-36 overflow-y-auto pr-1 custom-scrollbar"
>
  <div *ngFor="let comment of post.comments">
    <span class="font-medium text-gray-800">{{ comment.user?.username }}</span>:
    {{ comment.text }}
  </div>
</div>

    <!-- ➕ Add Comment -->
    <div class="mt-4 flex gap-2 items-center">
      <input
        type="text"
        [(ngModel)]="commentText"
        placeholder="Add a comment..."
        class="flex-1 border border-gray-300 px-3 py-1 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
      <button
        class="text-blue-600 font-medium text-sm hover:underline"
        (click)="addComment()"
      >
        Post
      </button>
    </div>
  </div>
</mat-card>
